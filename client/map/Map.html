<template name="Map">
  <div class="container"> 
    <div class="row">
      <div class="col-md-12">
        <div class="row">
          <div class="col-md-9" style="margin-left:-60px">
            <svg id="mysvg" onload="init(evt)">
	<!--  ROOMS -->	  
	<!-- COCKROACH ENTRY -->
    <polygon id="p1" points="203,166 265,139 288,191 223,217" style="fill:transparent;" onclick="alert('Cockroach Entry')"
	onmousemove="ShowTooltip(evt, 'Cockroach Entry')" onmouseout="HideTooltip()"/>
	
	<!-- PROJECT ROOM -->
	<polygon points="290,134 367,130 374,194 293,195" style="fill:transparent;" onclick="alert('Project Room')"
	onmousemove="ShowTooltip(evt, 'Project Room')" onmouseout="HideTooltip()"/>
		
	<!-- WANDERING WALL -->
	<circle r="27" cx="463" cy="173" style="fill:transparent;" onclick="alert('Wandering Wall')"
	onmousemove="ShowTooltip(evt, 'Wandering Wall')" onmouseout="HideTooltip()"/>
		
	<!-- ADOLPH ROOM -->
	<polygon id="adolphRoom" points="495,75 577,104 521,145 475,118" style="fill:transparent;"
	onmousemove="ShowTooltip(evt, 'Adolph Room')" onmouseout="HideTooltip()"/>

	<!-- STORMILOR HALL -->
	<polygon points="578,103 617,205 557,218 521,145" style="fill:transparent;" onclick="alert('Stormilor Hall')"
	onmousemove="ShowTooltip(evt, 'Stormilor Hall')" onmouseout="HideTooltip()"/>

	<!-- DIAZ KREZ ARENA -->
	<ellipse cx="664" cy="183" rx="37.1" ry="53" style="fill:transparent;" onclick="alert('Diaz Krez Arena')"
	onmousemove="ShowTooltip(evt, 'Diaz Krez Arena')" onmouseout="HideTooltip()"/>

    <!-- KALU HALL -->
	<polygon points="556,218 615,206 627,285 576,302 542,270" style="fill:transparent;" onclick="alert('Kalu Hall')"
	onmousemove="ShowTooltip(evt, 'Kalu Hall')" onmouseout="HideTooltip()"/>

	<!-- NORMINGOR ROOM A -->
	<polygon points="411,239 431,231 474,244 456,290 403,267" style="fill:transparent;" onclick="alert('Normingor Room A')"
	onmousemove="ShowTooltip(evt, 'Normingor Room A')" onmouseout="HideTooltip()"/>

	<!-- RISTAR ROOM -->
	<polygon points="475,244 541,270 576,303 571,325 457,290" style="fill:transparent;" onclick="alert('Ristar Room')"
	onmousemove="ShowTooltip(evt, 'Ristar Room')" onmouseout="HideTooltip()"/>
		
	<!-- STORMILLOR DUNGEON -->
	<polygon points="577,303 627,286 647,375 572,325" style="fill:transparent;" onclick="alert('Stormillor Dungeon')"
	onmousemove="ShowTooltip(evt, 'Stormillor Dungeon')" onmouseout="HideTooltip()"/>
		
	<!-- DIKTAUR ROOM -->
	<polygon points="405,268 456,291 425,388 393,327" style="fill:transparent;" onclick="alert('Diktaur Room')"
	onmousemove="ShowTooltip(evt, 'Diktaur Room')" onmouseout="HideTooltip()"/>

	<!-- NORMINGOR ROOM B -->
	<polygon points="457,291 571,326 555,385 437,350" style="fill:transparent;" onclick="alert('Normingor Room B')"
	onmousemove="ShowTooltip(evt, 'Normingor Room B')" onmouseout="HideTooltip()"/>
		
	<!-- PERFORMANTHOR ROOM -->
	<polygon points="437,351 555,386 575,421 426,388" style="fill:transparent;" onclick="alert('Performanthor Room')"
	onmousemove="ShowTooltip(evt, 'Performanthor Room')" onmouseout="HideTooltip()"/>
		
	<!-- ALMUSTHER ROOM -->
	<polygon points="572,326 647,376 576,421 556,386" style="fill:transparent;" onclick="alert('Almusther Room')"
	onmousemove="ShowTooltip(evt, 'Almusther Room')" onmouseout="HideTooltip()"/>

	<!-- BADGES -->
	<circle r="15" cx="357" cy="190" style="fill:transparent;" onclick="alert('Boat unlock spot')"
	onmousemove="ShowTooltip(evt, 'Boat unlock spot')" onmouseout="HideTooltip()"/>
	
	<circle r="15" cx="555" cy="95" style="fill:transparent;" onclick="alert('Boat unlock spot')"
	onmousemove="ShowTooltip(evt, 'Boat unlock spot')" onmouseout="HideTooltip()"/>
	
	<circle r="15" cx="610" cy="185" style="fill:transparent;" onclick="alert('Attackers unlock spot')"
	onmousemove="ShowTooltip(evt, 'Attackers unlock spot')" onmouseout="HideTooltip()"/>
	
	<circle r="15" cx="527" cy="240" style="fill:transparent;" onclick="alert('Double points spot')"
	onmousemove="ShowTooltip(evt, 'Double points spot')" onmouseout="HideTooltip()"/>
	
	<circle r="15" cx="420" cy="347" style="fill:transparent;" onclick="alert('Double points spot')"
	onmousemove="ShowTooltip(evt, 'Double points spot')" onmouseout="HideTooltip()"/>
	
	<circle r="15" cx="310" cy="361" style="fill:transparent;" onclick="alert('Mystery spot')"
	onmousemove="ShowTooltip(evt, 'Mystery spot')" onmouseout="HideTooltip()"/>
	
	<circle r="15" cx="648" cy="341" style="fill:transparent;" onclick="alert('Mystery spot')"
	onmousemove="ShowTooltip(evt, 'Mystery spot')" onmouseout="HideTooltip()"/>
	
	<circle r="15" cx="671" cy="151" style="fill:transparent;" onclick="alert('Food spot')"
	onmousemove="ShowTooltip(evt, 'Food spot')" onmouseout="HideTooltip()"/>
	
	<circle r="15" cx="615" cy="271" style="fill:transparent;" onclick="alert('Food spot')"
	onmousemove="ShowTooltip(evt, 'Food spot')" onmouseout="HideTooltip()"/>
	
	<circle r="15" cx="545" cy="302" style="fill:transparent;" onclick="alert('Food spot')"
	onmousemove="ShowTooltip(evt, 'Food spot')" onmouseout="HideTooltip()"/>
	
	<circle r="15" cx="625" cy="392" style="fill:transparent;" onclick="alert('Food spot')"
	onmousemove="ShowTooltip(evt, 'Food spot')" onmouseout="HideTooltip()"/>
	
	<rect class="tooltip_bg" id="tooltip_bg" x="0" y="0" rx="4" ry="4" width="52" height="16" visibility="hidden"/>
	<text  id="tooltip" x="0" y="0" visibility="hidden">Cockroach Entry</text>
</svg>
          </div>
          <div class="col-md-4" style="margin-left:-38px">
            <div class="row">
              <div class="col-md-12">
                <h3 style="font-size: 2.3em; font-weight: 201;">In the Land of Kroilon</h3>
              </div>
            </div>
            <div class="row">
              <div class="col-md-12">
                <p class="lead" style="margin-top: 0.0em; white-space: nowrap;">
                  Game Dashboard / <span style="font-weight: 201;">{{currentDay}}</span>
                </p>
              </div>
            </div>
            <div class="row" style="margin-top: 0.0em;">
              <div class="col-md-6">
                <div class="row">
                  <div class="col-md-12">
                    <h4 style="margin-bottom: 0.0em"><b>SCORE:</b></h4>
                    <h3 style="margin-top: 0.3em">{{total_day.score}}</h3>
                  </div>
                </div>                
              </div>
              <div class="col-md-6">
                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group row">
                      <div class="col-md-12 text-left">
                        <h4><b>ENERGY LEVEL:</b></h4>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group row">
                      <div class="col-md-12" style="padding-top: 0.6em">
                        <img id="div_energylevel" src={{total_day.img_energyLevel}} height="42" width="25">
                      </div>
                    </div>
                  </div>    
                </div>          
              </div>
            </div>
            <!-- BADGES -->            
            <div class="row">
              <div class="col-md-12">
                <div class="row">
                  {{#each currentRoomBadges}} 
                    <div class="col-md-3">
                      <img class="img-circle avatar avatar-original" style="-webkit-user-select:none; display:block; margin-top: 0.5em; " src='{{this.image}}' height="60" width="60" alt="Room Badge">
                      <p class="lead" style="margin-bottom: 0.1em; ">
                        <h4>{{this.status}}</h4>
                      </p>
                    </div>  
                  {{/each}}
                  <div class="col-md-3">
                    <img class="img-circle avatar avatar-original" style="-webkit-user-select:none; display:block; margin-top: 0.5em; " src='/teamBadges/gandalf.png' height="60" width="60" alt="Gandalf Badge">
                    <p class="lead" style="margin-bottom: 0.1em; ">
                      {{#if badgeGandalfLocked}}
                        <h4>Locked</h4>
                      {{else}}
                        <h4>Unlocked</h4>
                      {{/if}} 
                    </p>
                  </div>  

                </div>
              </div>
            </div>
            <!--
            <div class="row">
              <div class="col-md-4">
                <div class="form-group row">
                  <div class="col-md-12 text-left">
                    <h4><b>ENERGY LEVEL:</b></h4>
                  </div>
                </div>
              </div>
              <div class="col-md-8">
                <div class="form-group row">
                  <div class="col-md-12">
                    <img id="div_energylevel" src={{total_day.img_energyLevel}} height="50" width="30">
                  </div>
                </div>
              </div>
            </div>
            -->
            <!--
            <div class="row">
              <div class="col-md-12">
                <p class="lead" style="margin-bottom: 0.1em; ">
                  <h4><b>Daily message:</b></h4>
                  <h4>{{message}}</h4>
                </p>
              </div>
            </div>
            -->
            {{#with decisionExists}}   
              <div class="row">
                <div class="col-md-12">
                  <p class="lead" style="font-size: 18px; margin-bottom: 0.1em; margin-top: 0.5em;"><b>Decision</b></p>
                  <p class="lead" style="font-size: 18px; margin-bottom: 0.3em; font-weight: 201;">
                    {{dailyDecision}}
                  </p>
                </div>
              </div>
            {{/with}}
            <div class="row">
              <div class="col-md-12">
                <h5><b>Secrets</b></h5>
                <h5>Guess <b>+/-200 HP</b></h5>
                <h5>Miss <b>-/+50 HP</b></h5>
              </div>
            </div>
            <div class="row">
              <div class="col-md-12">
                <h5><b>Punctuality</b></h5>
                <h5>Everyone on time <b>+50 TP</b></h5>
                <h5>5 or more delays <b>-50 TP</b></h5>
                <h5>1 delay <b>-10 HP</b></h5>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script type="text/javascript">
    $(document).ready(function() {

    	var d = new Date();
    	var weekday = new Array(7);
    	weekday[0]=  "Sunday";
    	weekday[1] = "Monday";
    	weekday[2] = "Tuesday";
    	weekday[3] = "Wednesday";
    	weekday[4] = "Thursday";
    	weekday[5] = "Friday";
    	weekday[6] = "Saturday";

    	var n = weekday[d.getDay()];

      //document.getElementById("div_date_today").innerHTML = n;

    });
	
		  function init(evt)
  {
    if ( window.svgDocument == null )
    {
      svgDocument = evt.target.ownerDocument;
    }
    tooltip = svgDocument.getElementById('tooltip');
	tooltip_bg = svgDocument.getElementById('tooltip_bg');
	popup = svgDocument.getElementById('popup');
  }
  
  function ShowTooltip(evt, mouseovertext)
{
  tooltip.setAttributeNS(null,"x",evt.clientX-170);
  tooltip.setAttributeNS(null,"y",evt.clientY-110);
  tooltip.firstChild.data = mouseovertext;
  tooltip.setAttributeNS(null,"visibility","visible");
  
  tooltip_bg.setAttributeNS(null,"x",evt.clientX-170);
tooltip_bg.setAttributeNS(null,"y",evt.clientY-123);
tooltip_bg.setAttributeNS(null,"visibility","visible");

length = tooltip.getComputedTextLength();
tooltip_bg.setAttributeNS(null,"width",length+5);
}

function HideTooltip()
{
  tooltip.setAttributeNS(null,"visibility","hidden");
  tooltip_bg.setAttributeNS(null,"visibility","hidden");
}
  </script>
<script type="text/javascript">
  $('map').imageMapResize();
  </script>
  
  <style>
svg {
  background:url(Mapa_Kroilon.svg);
  background-repeat:no-repeat;
  width: 100%;
  height: 1000px;
  margin-left: -35px;
  float: left;
}

body {
  margin-left:auto;
  margin-right:auto;
}

#tooltip {
	color:white;
}

.tooltip_bg{
  fill: white;
  stroke: black;
  stroke-width: 1;
  opacity: 0.85;
}
  </style>
</template>
